# Voidへの貢献

[English](./CONTRIBUTING.md) | [中文](./CONTRIBUTING_CN.md) | [日本語](./CONTRIBUTING_JP.md)

ようこそ！👋 Voidへの貢献方法についてのガイドです。できるだけ簡単に貢献できるようにしたいので、質問やコメントがある場合は、メールかDiscordでお知らせください！

貢献方法は主に2つあります：

- 新しい機能の提案（[discord](https://discord.gg/RSNjgaugJs)）
- 新しい機能の構築（[project](https://github.com/orgs/voideditor/projects/2/views/3)）

Voidの機能のほとんどは[VSCode拡張機能](https://code.visualstudio.com/api/get-started/your-first-extension)を使用して実装しています。1. 拡張機能の構築/貢献方法、または2. 完全なIDEの構築/貢献方法（よりネイティブな変更用）を確認するには、下にスクロールしてください。

便利なリンクについては、[`VOID_USEFUL_LINKS.md`](https://github.com/voideditor/void/blob/main/VOID_USEFUL_LINKS.md)をご覧ください。

## 1. 拡張機能の構築
Void拡張機能に貢献する方法をご紹介します。これは、新しく始める方に最適な場所です。

1. リポジトリをクローン：

```
git clone https://github.com/voideditor/void
```

2. VS Codeで`/extensions/void`フォルダを開く（新しいワークスペースで開き、単にcdではなく）：

```
open /extensions/void
```

3. 依存関係をインストール：

```
npm install
```

4. プロジェクトをビルドします。`sidebar/index.tsx`を`dist/`にCSS/JSバンドルに変換するためのビルドコマンドを作成しました。

```
npm run build
```

5. <kbd>F5</kbd>を押してプロジェクトを実行します。

これにより、拡張機能が有効になっている新しいVS Codeのインスタンスが開始されます。うまくいかない場合は、<kbd>Ctrl+Shift+P</kbd>を押し、"Debug: Start Debugging"を選択し、"VS Code Extension Development"を選択できます。

AI機能を使用する場合は、APIキーを指定する必要があります。設定に移動して（Ctrl+,）、"void"と入力し、使用するAPIキー（たとえば、`"Anthropic Api Key"`環境変数）を追加してください。 "Which API"環境変数はプロバイダを制御し、デフォルトは"anthropic"です。

これでセットアップが完了したので、ぜひ[Issues](https://github.com/voideditor/void/issues)ページをご覧ください！

## 2. 完全なIDEの構築

拡張機能の他に、必要に応じてより多くの機能にアクセスする必要があるときには、IDEを編集することがあります。完全なIDEで作業する場合は、以下の手順に従うか、VS Codeの完全な[貢献方法](https://github.com/microsoft/vscode/wiki/How-to-Contribute)ページをご覧ください。

開始する前に、拡張機能をビルドしたことを確認してください（`cd .\extensions\void\`を実行して`npm run build`を実行）。また、システムにPythonがインストールされていることも確認してください。

`.nvmrc`に記載された正しいNodeJSバージョンを使用していることを確認してください。

1. すべての依存関係をインストールします。

```
npm install
```

2. VS Codeで<kbd>Ctrl+Shift+B</kbd>を押してビルドプロセスを開始します。これには時間がかかる場合があります。VS Codeを使用していない場合は、代わりに`npm run watch`を実行してください。

3. ターミナルで`./scripts/code.sh`を実行します。

これにより、いくつかの時間をロードした後、構築されたIDEが開かれるはずです。ビルドを再起動せずに新しい変更を確認するには、<kbd>Ctrl+Shift+P</kbd>を押して"Reload Window"を実行します。

IDEをバンドルするには、`npm run gulp vscode-darwin-arm64`を実行します。以下がフルオプションです：`vscode-{win32-ia32 | win32-x64 | darwin-x64 | darwin-arm64 | linux-ia32 | linux-x64 | linux-arm}(-min)`

Windowsを使用している場合、プロジェクトをdevコンテナ内で実行することをお勧めします。VS Codeは、これを自動的に実行するように促すはずです。

これでセットアップが完了したので、ぜひ[Issues](https://github.com/voideditor/void/issues)ページをご覧ください！

## ロードマップ

以下は当社のロードマップで最も重要なトピックです。⭐の数が多いほど重要です。

## ⭐⭐⭐ ディフの改善

ここでは、"ディフ"を変更を示す単一の緑/赤のペアと定義しています。以下の改善点があります：

1. 削除（-）ディフの表示。現在、挿入（+）ディフのみが表示されています。ディフは現在、新しいコードをすべて緑でハイライトして簡単なテキスト装飾で行われています。代わりに、VS Codeネイティブのコードを使用したいと考えていますdiffEditorを使用して差分を表示します（「inline」モード）。代替として、現在の状態を維持し、削除されたコードの赤いゾーンを追加して削除の差分（-）を示すこともできます。

2. ユーザーが差分の「承諾」または「拒否」を押下したときのバグ修正。1つの問題は、差分が承認/拒否されると、それより下のすべての差分が更新される必要があることです（それらは今異なる行番号になっているため）。その他の細かい問題もあります。

3. 差分のハイライトを動的にする。現在は、ユーザーがテキストを編集すると、すべての差分とそのハイライトがクリアされます。代わりに、差分のハイライトを更新する必要があります。各差分は一連の行に存在し、その範囲内またはそれと交差するすべての変更に対してハイライトを更新する必要があります。

## ⭐⭐⭐ カーソルスタイルのクイック編集（ctrl+k）を構築します。

ユーザーがctrl+kを押下すると、選択していたコードとインラインで入力ボックスが表示されるべきです。これはやや難しいことですが、拡張機能だけではできず、IDE内で新しいコンポーネントを作成する必要があります。vscodeの組み込みの「codelens」または「zone widget」コンポーネントを変更できると考えていますが、他の方法も検討しています。

## ⭐⭐⭐ ヒストリー機能をうまく機能させる。

ユーザーが応答を送信するか、適用/承認/拒否ボタンを押下すると、これらのイベントをヒストリーに追加して、ユーザーがそれらを元に戻したりやり直したりできるようにする必要があります。現在、ユーザーが変更を元に戻そうとしたりやり直そうとしたりすると予期しない動作が発生します。

## ⭐⭐⭐ Ctrl+Lのバックエンドを改善します。

現在、モデルはファイル全体を出力しています。代わりに、モデルが `// ... ファイルの残り` のような部分的な変更を出力するようプロンプトを変更すべきです。ユーザーが「適用」ボタンをクリックすると、モデルはファイルを書き換え、部分的な変更を正しい位置に適用すべきです。

## ⭐⭐ Ollamaと統合します。

拡張機能内にOllamaの統合がコーディングされていますが、動作しません。これは、Ollamaには'path'や'os'などのNode.js依存関係があるためです（拡張機能ではブラウザで実行する必要があるため）。これを修正するには、Voidの拡張機能を移行して、VS Codeエディター内でネイティブに実行できるようにする必要があります。

## ⭐⭐⭐ クリエイティブ。

標準のカーソル機能を超えたAI機能を構築しても構いません。例えば、より良いコード検索の作成や、複数のファイル間で編集を行い、複数のLLM呼び出しを行うAIエージェントをサポートするなどが考えられます。

最終的に、AIツールを作成するための便利なAPIを構築したいと考えています。このAPIは、UIを作成するためのメソッド（オートコンプリート提案の表示、新しい差分の作成など）、イベントの変更を検出するためのメソッド（`onKeystroke`や`onFileOpen`など）、およびユーザーのファイルシステムの修正（各ファイルに関連付けられたインデックスの保存）を提供します。これにより、独自のAIプラグインを作成するのがはるかに簡単になります。これらの機能は将来的にさらに構築する予定ですが、完全性のためにリストアップしておきたいと考えています。

## ⭐ 1スター。

⭐ ユーザーがctrl+Lを押下すると、サイドバーの状態がクリアされるべきです。

⭐ ユーザーによって、サイドバーを介してファイル全体のすべての差分を受け入れる/拒否することを許可します。

⭐ ユーザーが一度に複数のコードやファイルを選択できるようにします。

⭐ 現在の選択をXで閉じることができるようにします。

# ガイドライン

大きなリファクタリングを事前に相談せずに行わないでください。コードベースをvscodeと似たように保ち、定期的にリベースできるようにしたいので、複雑になるような大きな変更がある場合はお知らせください。

# Pull Requestの提出

変更を行ったら、Pull Requestを提出してください。以下はいくつかのガイドラインです：

- PRは1つの*単一*機能変更に関するものであるべきです。変更する項目が少ないほど、PRが受け入れられる可能性が高くなります。

- PRには、まず何をしたかを高いレベルで説明し、その後、どのファイルを変更したかについて正確に説明する記述が含まれているべきです。 "コードのリファクタリング"や "タイプの改善"などの曖昧なステートメントを使用しないでください（代わりに、どのコードをリファクタリングしたか、どのタイプを変更したかを説明してください）。

- タイトルは行った変更を明確に記述するようにしてください。

- 組織化を維持するためにタグを追加してください！

- PRのために新しいIssueを開かないでください。ただし、PRを提出してください。

- 同じPRでリファクタリングや機能変更を同時に行わないでください。

- 良いコードを書いてください。例えば、Voidの構成を編集する際によくあs/workbench/workbench.common.main.ts
- src/vs/workbench/contrib/void
- extensions/void

- .github/
- .vscode/settings
- .eslintrc.json
- build/hygiene.js
- build/lib/i18n.resources.json
- build/npm/dirs.js
